var HL;(()=>{"use strict";var t={d:(e,s)=>{for(var r in s)t.o(s,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:s[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{t.r(e),t.d(e,{hl:()=>w});let s=Object.freeze({LINE_END:0,MINUS:1,ADD:2,MUL:3,DIV:4,NUMBER:5,STRING:6,EQUAL:7,GREATER_THAN:8,LESS_THAN:9,GREATER_THAN_EQUAL_TO:10,LESS_THAN_EQUAL_TO:11,NOT:12,TRUE:13,FALSE:14,AND:15,OR:16,IDENTIFIER:17,OPEN_CURLY:18,CLOSE_CURLY:19,OPEN_PARANTHESIS:20,CLOSE_PARENTHESIS:21,OPEN_BRACKET:22,CLOSE_BRACKET:23,VAR:24,IF:25,ELSE:26,WHILE:27,FOR:28,FUNCTION:29,NONE:30,BANG_EQUAL:31,EQUAL_EQUAL:32,CLASS:33,RETURN:34,PRINT:35,COMMA:36}),r={var:s.VAR,if:s.IF,else:s.ELSE,while:s.WHILE,for:s.FOR,def:s.FUNCTION,True:s.TRUE,False:s.FALSE,None:s.NONE,print:s.PRINT,class:s.CLASS,return:s.RETURN,or:s.OR,and:s.AND};class i{constructor(t,e,s){this.lineno=t,this.type=e,this.literal=s}}class n{constructor(){this.tokens=[],this.text="",this.currIndex=-1,this.currLine=1,this.currliteral=""}parse(t){for(this.text=t,this.currIndex=0;this.currIndex<t.length;){let e=t[this.currIndex],r=this.currLine;switch(e){case"(":this.tokens.push(new i(r,s.OPEN_PARANTHESIS,e));break;case")":this.tokens.push(new i(r,s.CLOSE_PARENTHESIS,e));break;case"[":this.tokens.push(new i(r,s.OPEN_BRACKET,e));break;case"]":this.tokens.push(new i(r,s.CLOSE_BRACKET,e));break;case"{":this.tokens.push(new i(r,s.OPEN_CURLY,e));break;case"}":this.tokens.push(new i(r,s.CLOSE_CURLY,e));break;case"+":this.tokens.push(new i(r,s.ADD,e));break;case"-":this.tokens.push(new i(r,s.MINUS,e));break;case"*":this.tokens.push(new i(r,s.MUL,e));break;case"/":this.tokens.push(new i(r,s.DIV,e));break;case";":this.tokens.push(new i(r,s.LINE_END,e));break;case"<":if("="==this.peek()){this.currIndex+=1,this.tokens.push(new i(r,s.LESS_THAN_EQUAL_TO,"<="));break}this.tokens.push(new i(r,s.LESS_THAN,e));break;case">":if("="==this.peek()){this.currIndex+=1,this.tokens.push(new i(r,s.GREATER_THAN_EQUAL_TO,">="));break}this.tokens.push(new i(r,s.GREATER_THAN,e));break;case"=":if("="==this.peek()){console.log("parising double equal",r),this.currIndex+=1,this.tokens.push(new i(r,s.EQUAL_EQUAL,"=="));break}this.tokens.push(new i(r,s.EQUAL,e));break;case",":this.tokens.push(new i(r,s.COMMA,e));break;case"!":if("="==this.peek()){this.currIndex+=1,this.tokens.push(new i(r,s.BANG_EQUAL,"!="));break}this.tokens.push(new i(r,s.NOT,e));break;case"&":if("&"!=this.peek())throw Error("Unidentified Token");this.currIndex+=1,this.tokens.push(new i(r,s.AND,"&&"));break;case"|":if("|"!=this.peek())throw Error("Unidentified Token");this.currIndex+=1,this.tokens.push(new i(r,s.OR,"||"));break;case"\n":this.currLine++;break;case'"':case"'":this.string_l(e);break;default:this.isNumber(e)?this.number_l():this.isLetter(e)&&this.identifier_l()}this.currIndex++}let e=this.tokens;return this.tokens=[],this.currIndex=-1,this.currliteral="",this.currLine=1,e}string_l(t){this.currIndex;let e=!1,r="",n={a:"a",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v"};for(;null!=this.peek()&&(this.peek()!==t||e);){if("\\"!=this.peek()||e)if(e){let t=this.peek();this.peek()in n&&(t=n[this.peek()]),r+=t,e=!1}else r+=this.peek();else e=!0;this.currIndex++}if(null===this.peek())throw Error("String not ending");this.currIndex++,this.tokens.push(new i(this.currLine,s.STRING,r))}identifier_l(){let t=this.currIndex;for(;this.isAlphaNumeric(this.peek());)this.currIndex++;let e=this.text.slice(t,this.currIndex+1);e in r?this.tokens.push(new i(this.currLine,r[e],e)):this.tokens.push(new i(this.currLine,s.IDENTIFIER,e))}isAlphaNumeric(t){return null!=t&&(this.isLetter(t)||this.isNumber(t))}isLetter(t){if(null==t)return!1;let e=t.charCodeAt(0);return e>=65&&e<91||e>=97&&e<123}isNumber(t){if(null==t)return!1;let e=t.charCodeAt(0);return e>=48&&e<58}number_l(){let t=this.currIndex;for(;!isNaN(this.peek()-0);)this.currIndex++;if(this.match("."))for(;!isNaN(this.peek()-0);)this.currIndex++;let e=this.text.slice(t,this.currIndex+1);this.tokens.push(new i(this.currLine,s.NUMBER,e))}peek(){return this.currIndex+1<this.text.length?this.text[this.currIndex+1]:null}match(t){return t==this.peek()&&(this.currIndex++,!0)}}class h{constructor(t){this.type=t}}let a=Object.freeze({STRING:1,NUMBER:2,BOOLEAN:3,NONE:4,VARDECLARATION:5,BINARY_OP:6,UNARY_OP:7,GROUPING:8,INBUILT_CALL:9,IFSTATEMENT:10,BLOCK:11,IDENTIFIER:12,WHILELOOP:13,FORLOOP:14,EXPRLIST:15,VAREXPRLIST:16,FUNDECLARE:17,FUNCALL:18,RETURNSTMT:19});class u extends h{constructor(t){super(a.BLOCK),this.statements=t}}class l extends h{constructor(t,e){super(t),this.value=e}}class o extends h{constructor(t){super(a.VAREXPRLIST),this.list=t}}class c extends h{constructor(t,e,s){super(a.FUNDECLARE),this.name=t,this.parameters=e,this.body=s,this.parent=null}}class E extends h{constructor(t,e,s){super(a.BINARY_OP),this.right=e,this.left=t,this.op=s}isAssignable(){return typeof this.right==d&&this.right.isAssignable()}}class p extends h{constructor(t){super(a.GROUPING),this.expr=t}}class N extends h{constructor(t,e){super(a.UNARY_OP),this.right=t,this.op=e}}class v extends h{constructor(t,e){super(a.WHILELOOP),this.condition=t,this.block=e}}class L extends h{constructor(t,e,s){super(t),this.identifier=e,this.value=s}}class A extends h{constructor(t,e){super(a.INBUILT_CALL),this.name=t,this.operands=e}}class f extends h{constructor(t){super(a.RETURNSTMT),this.exprList=t}}class I extends h{constructor(t,e,s,r){super(a.FORLOOP),this.initialisation=t,this.condition=e,this.increment=s,this.block=r}}class R extends h{constructor(t,e){super(a.FUNCALL),this.name=t,this.exprList=e}}class d extends h{constructor(t){super(a.EXPRLIST),this.list=t}isAssignable(){for(let t of this.list)if(t.type!=a.IDENTIFIER)return!1;return!0}}class T extends h{constructor(t,e,s){super(a.IFSTATEMENT),this.condition=t,this.statements=e,this.else_statements=s}}class S{constructor(t){this.tokens=t,this.statements=[],this.currToken=0,this.funScope=0}run(){for(;this.currToken<this.tokens.length;)try{this.statements.push(this.statement())}catch(t){console.log(t),this.synchronize()}return this.statements}statement(){if(this.match(s.VAR)){let t=this.varDeclaration();return this.consume(s.LINE_END,"Expected an end of line token"),t}if(this.match(s.PRINT))return this.printStatement();if(this.match(s.IF))return this.ifStatement();if(this.match(s.OPEN_CURLY))return this.block();if(this.match(s.WHILE))return this.whileLoop();if(this.match(s.FOR))return this.forLoop();if(this.match(s.FUNCTION))return this.funDeclaration();if(this.match(s.RETURN))return this.returnStatement();let t=this.expression();return this.consume(s.LINE_END,"Expected a statement"),t}returnStatement(){if(0===this.funScope)throw new Error("You can only use Return statement inside a function");let t=this.expressionList();return this.consume(s.LINE_END,"Expected an end of line token."),new f(t)}funDeclaration(){this.funScope++,this.consume(s.IDENTIFIER,"Expected an identifier.");let t=this.previous().literal;this.consume(s.OPEN_PARANTHESIS,"Expect '('.");let e=this.parameterList();this.consume(s.CLOSE_PARENTHESIS,"Expect ')'.");let r=null;return this.match(s.OPEN_CURLY)&&(r=this.block()),this.funScope--,new c(t,e,r)}parameterList(){let t=[];if(this.check(s.CLOSE_PARENTHESIS))return t;do{this.consume(s.VAR,"Expected a variable declaration"),t.push(this.varDeclaration())}while(!this.isAtEnd()&&this.match(s.COMMA));if(this.isAtEnd())throw new Error("Unexpected end of stream.");return t}forLoop(){let t=null,e=null,r=null;this.consume(s.OPEN_PARANTHESIS,"Expect '('."),this.match(s.LINE_END)||(t=this.varDeclarationAndExprList(),this.consume(s.LINE_END,"Expected End of line")),this.match(s.LINE_END)||(e=this.or(),this.consume(s.LINE_END,"Expected End of Line.")),this.match(s.CLOSE_PARENTHESIS)||(r=this.assign(),this.consume(s.CLOSE_PARENTHESIS,"Expected ')'."));let i=this.statement();return new I(t,e,r,i)}expressionList(){let t=[];for(t.push(this.or());!this.isAtEnd()&&this.match(s.COMMA);)t.push(this.or());if(this.isAtEnd())throw new Error("Unexpected end of stream");return new d(t)}whileLoop(){this.consume(s.OPEN_PARANTHESIS,"Expect '('");let t=this.or();this.consume(s.CLOSE_PARENTHESIS,"Expect ')'");let e=this.statement();return new v(t,e)}varDeclarationAndExprList(){let t=[];do{this.match(s.VAR)?t.push(this.varDeclaration()):t.push(this.or())}while(!this.isAtEnd()&&this.match(s.COMMA));if(console.log(t),this.isAtEnd())throw new Error("unexpected end of stream.");return new o(t)}varDeclaration(){if(this.match(s.IDENTIFIER)){let t=this.previous().literal,e=null;return this.match(s.EQUAL)&&(e=this.or()),new L(a.VARDECLARATION,t,e)}throw new Error("Expected an identifer in variable declaration.")}block(){let t=[];for(;!this.isAtEnd()&&!this.check(s.CLOSE_CURLY);)t.push(this.statement());if(this.isAtEnd())throw new Error("Unexpected end of stream");return this.consume(s.CLOSE_CURLY,"Expect '}'"),new u(t)}ifStatement(){this.consume(s.OPEN_PARANTHESIS,"Expect '(' after if.");let t=this.expression();this.consume(s.CLOSE_PARENTHESIS,"Except ')' after expression.");let e=this.statement(),r=null;return this.match(s.ELSE)&&(r=this.statement()),new T(t,e,r)}printStatement(){let t=this.previous(),e=this.expressionList();return this.consume(s.LINE_END,"Expect Line End after print statement."),new A(t,e)}expression(){return this.assign()}assign(){let t=this.expressionList();for(;this.match(s.EQUAL);){let e=this.previous(),s=this.expressionList();if(!t.isAssignable())throw new Error("Unable to assign value to non-variable");t=new E(t,s,e)}return t}synchronize(){for(this.advance();!this.isAtEnd();){if(this.previous.type==s.LINE_END)return;switch(this.peek().type){case s.CLASS:case s.FUNCTION:case s.VAR:case s.IF:case s.FOR:case s.RETURN:case s.WHILE:return}this.advance()}}equality(){let t=this.comparison();for(;this.match(s.BANG_EQUAL)||this.match(s.EQUAL_EQUAL);){let e=this.previous(),s=this.comparison();t=new E(t,s,e)}return t}or(){let t=this.and();for(;this.match(s.OR);){let e=this.previous(),s=this.and();t=new E(t,s,e)}return t}and(){let t=this.equality();for(;this.match(s.AND);){let e=this.previous(),s=this.equality();t=new E(t,s,e)}return t}comparison(){let t=this.term();for(;this.match(s.GREATER_THAN,s.LESS_THAN,s.GREATER_THAN_EQUAL_TO,s.LESS_THAN_EQUAL_TO);){let e=this.previous(),s=this.term();t=new E(t,s,e)}return t}term(){let t=this.factor();for(;this.match(s.ADD,s.MINUS);){let e=this.previous(),s=this.factor();t=new E(t,s,e)}return t}factor(){let t=this.unary();for(;this.match(s.DIV,s.MUL);){let e=this.previous(),s=this.unary();t=new E(t,s,e)}return t}unary(){if(this.match(s.NOT,s.MINUS)){let t=this.previous(),e=this.unary();return new N(e,t)}return this.primary()}primary(){if(this.match(s.FALSE))return new l(a.BOOLEAN,!1);if(this.match(s.TRUE))return new l(a.BOOLEAN,!0);if(this.match(s.NONE))return new l(a.NONE,null);if(this.match(s.STRING))return new l(a.STRING,this.previous().literal);if(this.match(s.NUMBER))return new l(a.NUMBER,Number(this.previous().literal));if(this.match(s.IDENTIFIER)){let t=this.previous().literal;if(this.match(s.OPEN_PARANTHESIS)){let e=new d([]);return this.check(s.CLOSE_PARENTHESIS)||(e=this.expressionList()),this.consume(s.CLOSE_PARENTHESIS,"Expected ')'"),new R(t,e)}return new l(a.IDENTIFIER,t)}if(this.match(s.OPEN_PARANTHESIS)){let t=this.expression();return this.consume(s.CLOSE_PARENTHESIS,"Expect ')' after expression."),new p(t)}throw this.error(this.peek(),"Expect expression")}error(t,e){return new Error(e)}isAtEnd(){return this.currToken>=this.tokens.length}advance(){return this.isAtEnd()||this.currToken++,this.previous()}previous(){return this.currToken>0?this.tokens[this.currToken-1]:null}peekAhead(){return this.currToken+1<this.tokens.length?this.tokens[this.currToken+1]:null}peek(){return this.tokens[this.currToken]}match(...t){for(let e of t)if(this.check(e))return this.advance(),!0;return!1}check(t){return!this.isAtEnd()&&this.peek().type==t}consume(t,e){if(this.match(t))return!0;throw Error(e)}literal(){return this.tokens[this.currToken].type==s.STRING?new l(a.STRING,this.literal):this.tokens[this.currToken].type==s.NUMBER?new l(a.NUMBER,this.literal):this.tokens[this.currToken].type==s.TRUE?new l(a.BOOLEAN,!0):this.tokens[this.currToken].type==s.FALSE?new l(a.BOOLEAN,!1):this.tokens[this.currToken].type==s.NONE?new l(a.NONE,null):null}}class m extends Error{constructor(t){super("Returning from function"),this.value=t}}class k{constructor(t){this.parent=t,this.variables={}}resolveGet(t){return t in this.variables?this.variables[t]:null!=this.parent?this.parent.resolveGet(t):void 0}resolveSet(t,e){return t in this.variables?(this.variables[t]=e,!0):null!=this.parent&&this.parent.resolveSet(t,e)}isDeclared(t){return t in this.variables}declare(t){this.variables[t]=null}}class O{constructor(t,e){this.statements=t,this.globalEnv=new k(null),this.currEnv=this.globalEnv,this.out=e}run(){for(let t of this.statements)this.evaluate(t)}evaluate(t){switch(t.type){case a.INBUILT_CALL:return this.inbuiltcall(t);case a.BINARY_OP:return this.evalBinary(t);case a.UNARY_OP:return this.evalUnary(t);case a.GROUPING:return this.evaluate(t.expr);case a.STRING:case a.NONE:case a.BOOLEAN:case a.NUMBER:return t.value;case a.IDENTIFIER:return this.currEnv.resolveGet(t.value);case a.BLOCK:return this.evaluateBlock(t);case a.IFSTATEMENT:return this.evaluateIfStatement(t);case a.VARDECLARATION:return this.evaluateVarDeclaration(t);case a.WHILELOOP:return this.evaluateWhileLoop(t);case a.FORLOOP:return this.evaluateForLoop(t);case a.VAREXPRLIST:return this.evaluateVarExprList(t);case a.FUNDECLARE:return this.evaluateFunDeclaration(t);case a.FUNCALL:return this.evaluateFunCall(t);case a.EXPRLIST:return this.evaluateExprList(t);case a.RETURNSTMT:return this.evaluateReturnStatement(t)}}evaluateReturnStatement(t){throw new m(this.evaluate(t.exprList))}evaluateExprList(t){if(1!==t.list.length)throw new Error("Can't have Have an expression list without assigment");return this.evaluate(t.list[0])}evaluateFunCall(t){let e=[],s=this.currEnv;for(let s of t.exprList.list)e.push(this.evaluate(s));let r=this.currEnv.resolveGet(t.name);if(!r||r.type!==a.FUNDECLARE)throw new Error("Undefined function.");this.currEnv=r.parent,this.currEnv=new k(this.currEnv);for(let t=0;t<r.parameters.length;t++){let s=r.parameters[t];this.currEnv.declare(s.identifier),s.value&&this.currEnv.resolveSet(s.identifier,this.evaluate(s.value)),this.currEnv.resolveSet(s.identifier,e[t])}let i=null;try{this.evaluate(r.body)}catch(t){i=t.value}return this.currEnv=this.currEnv.parent,this.currEnv=s,i}evaluateFunDeclaration(t){t.parent=this.currEnv,this.currEnv.declare(t.name),this.currEnv.resolveSet(t.name,t)}evaluateVarExprList(t){for(let e of t.list)this.evaluate(e)}evaluateForLoop(t){for(this.currEnv=new k(this.currEnv),this.evaluate(t.initialisation);this.evaluate(t.condition);this.evaluate(t.increment))this.evaluate(t.block);this.currEnv=this.currEnv.parent}evaluateWhileLoop(t){for(;this.evaluate(t.condition);)this.evaluate(t.block)}evaluateVarDeclaration(t){let e=null;t.value&&(e=this.evaluate(t.value)),this.currEnv.declare(t.identifier),this.currEnv.resolveSet(t.identifier,e)}evaluateIfStatement(t){this.evaluate(t.condition)?this.evaluate(t.statements):t.else_statements&&this.evaluate(t.else_statements)}evaluateBlock(t){this.currEnv=new k(this.currEnv);for(let e of t.statements)this.evaluate(e);this.currEnv=this.currEnv.parent}inbuiltcall(t){if(t.name.type===s.PRINT){let e=[];for(let s of t.operands.list)e.push(this.evaluate(s));for(let t of e)this.printValue(t)}}printValue(t){this.out.value+=null===t?"None":!0===t?"True":0==t?"False":t}evalBinary(t){switch(t.op.type){case s.ADD:return this.evaluate(t.left)+this.evaluate(t.right);case s.MINUS:return this.evaluate(t.left)-this.evaluate(t.right);case s.DIV:return this.evaluate(t.left)/this.evaluate(t.right);case s.MUL:let e=this.evaluate(t.left),r=this.evaluate(t.right);if("string"==typeof e&&"number"==typeof r){if(Number.isInteger(r)&&r>=0){let t="";for(let s=0;s<r;s++)t+=e;return t}throw new Error("Can not multiply string with a non-integer number.")}return e*r;case s.EQUAL_EQUAL:return this.evaluate(t.left)===this.evaluate(t.right);case s.BANG_EQUAL:return this.evaluate(t.left)!==this.evaluate(t.right);case s.GREATER_THAN:return this.evaluate(t.left)>this.evaluate(t.right);case s.GREATER_THAN_EQUAL_TO:return this.evaluate(t.left)>=this.evaluate(t.right);case s.LESS_THAN:return this.evaluate(t.left)<this.evaluate(t.right);case s.LESS_THAN_EQUAL_TO:return this.evaluate(t.left)<=this.evaluate(t.right);case s.OR:return this.evaluate(t.left)||this.evaluate(t.right);case s.AND:return this.evaluate(t.left)&&this.evaluate(t.right);case s.EQUAL:let i=[];for(let e of t.right.list)i.push(this.evaluate(e));for(let e=0;e<t.left.list.length;e++)if(!this.currEnv.resolveSet(t.left.list[e].value,i[e]))throw new Error("Variable not defined.",t.left.list[e]);return t.left}}evalUnary(t){switch(t.op){case s.NOT:return!this.evaluate(t.right);case s.MINUS:return-this.evaluate(t.right)}}}var w=new class{run(t,e){let s=(new n).parse(t),r=new S(s).run();new O(r,e).run()}getKeywords(){return r}}})(),HL=e})();